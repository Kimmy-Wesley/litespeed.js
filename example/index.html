<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Litespeed.js</title>
        <link rel="icon" type="image/png" href="/favicon.png">
        <link href="/styles/default.css" rel="stylesheet" />
        <link href="/styles/androidstudio.css" rel="stylesheet" />
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        <meta name="description" content="Sample Litespeed.js application">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />

        <style>
            [data-ls-placeholder] {
                background: red;
            }
        </style>
    </head>

    <body data-ls-init data-first-from-server="false">
        <header class="header">
            <nav>
                <ul>
                    <li>
                        <a href="/" data-route>Home</a>
                    </li>
                    <li>
                        <!--<a href="/getting-started.html">Getting Started</a>-->
                    </li>
                    <li>
                        <a href="/example.html">Demo</a>
                    </li>
                    <li>
                        <!--<a href="/docs.html">Docs</a>-->
                    </li>
                    <li>
                        <a href="/article.html">Blog</a>
                    </li>
                    <li>
                        <!--<a href="/todo/add">Task Demo</a>-->
                    </li>
                    <li>
                        <!--<span onclick="alert(0); window.location = '/todo/add';">Task Demo</span>-->
                    </li>
                </ul>
            </nav>

            <a href="/" title="Litespeed.js" alt="Litespeed.js">
                <img src="/images/litespeed.png" alt="Litespeed.js" title="Litespeed.js" class="logo" height="70" />
            </a>
        </header>

        <main data-ls-scope="" style="min-height: 500px">
            <div class="loader"></div>
        </main>

        <hr />

        <footer>
            Â© 2015-2016. Code licensed under an MIT License
        </footer>

        <script src="scripts/highlight.pack.js"></script>
        <script>
            (function (window) {
                "use strict";

                document.addEventListener("DOMContentLoaded", function() {
                    var head      = document.getElementsByTagName('head')[0];
                    var script    = document.createElement('script');
                    script.type   = 'text/javascript';
                    script.async  = true;
                    script.src    = 'scripts/litespeed.js';

                    script.onload = function() {
                        window.Demo = app('v1.0.0'); // Init app and set cache buster value

                        var state   = window.Demo.container.get('state');
                        var view    = window.Demo.container.get('view');

                        state
                            .add('/', {
                                template: '/pages/index.html'
                            })
                            .add('/tasks/add.html', {
                                template: '/pages/about.html'
                            })
                            .add('/about.html', {
                                template: '/pages/about.html'
                            })
                            .add('/article.html', {
                                template: '/pages/article.html'
                            })
                            .add('/example.html', {
                                template: '/pages/example.html',
                                controller: function (element, container) {
                                    var service = container.get('tasks');
                                    var x = 0;
                                    setInterval(function () {
                                        Object.path(service, 'title', '3s Interval Overtake. (' + (x++) + ')');
                                        service.list.push('Added task');
                                    }, 10000);
                                }
                            })
                            .add('/todo/add', {
                                controller: function (element, container) {
                                    alert('exec');
                                },
                                state: false
                            })
                            .add('/todo/remove', {
                                controller: function (element, container) {

                                },
                                state: false
                            })
                        ;

                        window.Demo.container
                            .set('tasks', function () {
                                return {
                                    title: 'Task Title',
                                    test: {
                                        'new': 'title',
                                        'nested': {
                                            'value': 'empty'
                                        }
                                    },
                                    list: [
                                        'This is just my first task',
                                        'This is just another test adding a second task',
                                        'What do you think about this test'
                                    ],
                                    add: function (task) {
                                        this.list.push(task);
                                    }
                                }
                            }, true)
                        ;

                        view
                            .add(
                                {
                                    selector: 'data-code',
                                    controller: function(element) {
                                        hljs.highlightBlock(element);
                                    }
                                }
                            );

                        window.Demo.run(window);
                    };

                    head.appendChild(script);
                });

            }(window));

        </script>
    </body>
</html>