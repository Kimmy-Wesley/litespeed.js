var request=env.require("request"),response=env.require("response"),router=env.require("router"),view=env.require("view"),App=function(){return{view:this.view,router:this.router}},environment,request=function(){var r=function(r,t){return new Promise(function(e,n){var o=new XMLHttpRequest;o.open(r,t,!0),o.onload=function(){4==o.readyState&&200==o.status&&e(o.response),n(Error(o.statusText))},o.onerror=function(){n(Error("Network Error"))},o.send()})};return{get:function(t){return r("GET",t,{})},post:function(t,e){return r("POST",t,e)},put:function(t){return r("PUT",t,{})},"delete":function(t){return r("DELETE",t,{})}}}();this.router=function(){var r=[];return{state:function(t,e,n){if("string"!=typeof t)throw new Error("var path must be of type string");if("string"!=typeof e)throw new Error("var template must be of type string");if("function"!=typeof n)throw new Error("var controller must be of type function");return r[r.length++]={path:t,template:e,controller:n},this},match:function(){return r.forEach(function(t){var e=new RegExp(window.location.origin+t.path.replace(/:[^\s/]+/g,"([\\w-]+)")),n=window.location.href;return console.log(n.match(e)),n.match(e)?t:r.firstChild?r.firstChild:null})}}}();var view=function(){var r=[];return{comp:function(t){if("object"!=typeof t)throw new Error("var object must be of type object");return r[r.length++]=t,this},render:function(t){var e=this;return console.log(t),r.forEach(function(r){for(var n=t.querySelectorAll(r.selector),o=0;o<n.length;o++){var i=n[o];i.style.background="#"+Math.floor(16777215*Math.random()).toString(16),i.style.opacity=".8",http.get(r.template).then(function(t){i.innerHTML=t,r.controller(i),e.render(i)},function(r){console.error("Failed!",r)})}}),this}}}(),http=function(){var r=function(r,t,e,n){if(-1==["GET","POST","PUT","DELETE","TRACE","HEAD","OPTIONS","CONNECT","PATCH"].indexOf(r))throw new Error("var method must contain a valid HTTP method name");if("string"!=typeof t)throw new Error("var url must be of type string");if("object"!=typeof e)throw new Error("var headers must be of type object");if("string"!=typeof t)throw new Error("var url must be of type string");return new Promise(function(o,i){var u=new XMLHttpRequest;u.open(r,t,!0);for(var s in e)e.hasOwnProperty(s)&&u.setRequestHeader(s,e[s]);u.onload=function(){4==u.readyState&&200==u.status&&o(u.response),i(Error(u.statusText))},u.onerror=function(){i(Error("Network Error"))},u.send(n)})};return{get:function(t){return r("GET",t,{},"")},post:function(t){return r("POST",t,{"Content-type":"application/x-www-form-urlencoded"},"")},put:function(t){return r("PUT",t,{},"")},"delete":function(t){return r("DELETE",t,{},"")}}}();